create generator create_id; 
set generator create_id to 15;

create trigger auto_create_id for hotel before insert as

begin new.id=gen_id(create_id, 1);
end

create exception error_type 'Error. Cant delete or update in table type'; 
create trigger control_type for type before delete or update
as begin
if(old.id in (select type_id from place_of_interest)) 
then exception error_type;
end


create exception Error_buy 
'Error. You can not buy more than two passes.'; 
create trigger control_buy for trip before insert
as 
declare variable tor integer;
begin
tor=-1
select id_client from trip
where  id_client=new.id_client) into: tor;
if(tor<>-1) then
exception Error_buy;
end



CREATE OR ALTER TRIGGER AUTO_INSURANCE FOR TRIP before insert
as
declare variable ins_id integer;
begin
  /* Trigger text */

  if(gen_id(id_insurance,0) > 1) then begin
 ins_id =gen_id(id_insurance,-gen_id(id_insurance,1));
          ins_id = GEN_ID(id_insurance,1);
          new.id_insurance =:ins_id;
   end

  else           begin
    ins_id = GEN_ID(id_insurance,1);
  NEW.id_insurance = :ins_id;   end



end


create generator id_insurance; 
set generator id_insurance to 1;